"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var crowdin_editor=function(_CrowdinComponent){_inherits(crowdin_editor,_CrowdinComponent);var _super=_createSuper(crowdin_editor);function crowdin_editor(){var _this;_classCallCheck(this,crowdin_editor);_this=_super.call(this);_this.onlineStatus=true;_this.DEFAULT_STEP_ID=0;_this.BASIC_WORKFLOW_PROOFREAD_STEP_ID=2;_this.view=null;_this.mainMenuView=null;_this.textareaView=null;_this.mode="translate";_this.MODE_NAME_TRANSLATE="translate";_this.MODE_NAME_PROOFREAD="proofread";_this.MODE_NAME_ASSETS="assets";_this.MODE_NAME_REVIEW="review";_this.WF_STEP_TYPE_TRANSLATE="Translate";_this.WF_STEP_TYPE_PROOFREAD="Proofread";_this.WF_STEP_TYPE_TRANSLATE_BY_VENDOR="TranslateByVendor";_this.WF_STEP_TYPE_PROOFREAD_BY_VENDOR="ProofreadByVendor";_this.WF_STEP_TYPE_SOURCE_TEXT_REVIEW="SourceTextReview";_this.WF_STEP_TYPE_CROWDSOURCE="Crowdsource";_this.branding={};_this.config={};_this.repair_tm_suggestion={is_available:false,supported_language_pairs:[]};_this.project={id:null,identifier:null,name:null,owner:null,url:null,wshash:null,use_global_tm:false,use_external_tm:false,use_external_suggestions:false,has_basic_workflow:false,has_advanced_workflow:false};_this.file=null;_this.file_nodes={directory:0,file:1,branch:2};_this.task={id:null};_this.workflow_step={id:undefined};_this.workflow_steps=[];_this.workflow_step_ids=[];_this.workflow_proofread_steps=[];_this.source_language=null;_this.target_language=null;_this.out_of_scope_target_lang=null;_this.out_of_scope_workflow_step=null;_this.failed_request_workflow_step=null;_this.is_glossary_file=false;_this.show_placeholders_filetypes=[];_this.needs_additional_escape_filetypes=[];_this.jipt_mode=false;_this.jipt_origin="";_this.html_preview=null;_this.preload_limit=[1,2];_this.translation_discussions=[];_this.active_qa_categories=[];_this.validator_categories={};_this.show_filter_for_kickstarter=null;_this.ws_hash_user_key=null;_this.EMAIL_SALES=null;_this.latest_window_event=null;_this.inherit(INIT_EDITOR);window.INIT_EDITOR=null;if(!_this.project.has_advanced_workflow){_this.workflow_step={id:undefined}}else if(_this.workflow_step.id===_this.DEFAULT_STEP_ID){_this.workflow_step.id=undefined}_this.modeAssets=_this.modeAssets.bind(_assertThisInitialized(_this));_this.modeReview=_this.modeReview.bind(_assertThisInitialized(_this));_this.modeProofread=_this.modeProofread.bind(_assertThisInitialized(_this));_this.modeTranslate=_this.modeTranslate.bind(_assertThisInitialized(_this));_this.isWorkflowStep=_this.isWorkflowStep.bind(_assertThisInitialized(_this));_this.modeReviewProofread=_this.modeReviewProofread.bind(_assertThisInitialized(_this));_this.modeTranslateProofread=_this.modeTranslateProofread.bind(_assertThisInitialized(_this));return _this}_createClass(crowdin_editor,[{key:"initEditorView",value:function initEditorView(){this.addAdditionalBodyClasses();switch(this.mode){case"review":ReactDOM.render(React.createElement(ReviewView,{onBoarding:INIT_ONBOARDING}),document.getElementById("crowdin-editor-wrapper"));break;case"translate":ReactDOM.render(React.createElement(TranslateView,{onBoarding:INIT_ONBOARDING}),document.getElementById("crowdin-editor-wrapper"));break;case"proofread":ReactDOM.render(React.createElement(ProofreadView,{onBoarding:INIT_ONBOARDING}),document.getElementById("crowdin-editor-wrapper"));break;case"assets":ReactDOM.render(React.createElement(AssetsView),document.getElementById("crowdin-editor-wrapper"));break}}},{key:"updateTitle",value:function updateTitle(){if(this.file){var fileTitle=_l("editor.allStrings");if(this.file.id!=="all"){fileTitle=this.file.name}document.title=_l("editorMenu.fileProjectSiteTranslation",{file:htmlspecialchars(fileTitle),project:htmlspecialchars(this.project.name),siteName:branding.getName()})}}},{key:"bindProgress",value:function bindProgress(){var self=this;$(window).on("blur focus",(function(e){self.latest_window_event=e.type}));setInterval((function(){if(self.latest_window_event!=="blur"){self.getProgress()}}),2*60*1e3)}},{key:"getProgress",value:function getProgress(){if(this.modeAssets()||!this.file||!this.target_language||this.jipt_mode||this.isNotLoadedWorkflowStep()){return}var self=this,file=self.file.id.toString(),language=self.target_language.id;var url=crowdin.editor.task.id?"/task/get_progress":"/file/get_progress";crowdin.ajax.getData(url,{project_id:self.project.id,workflow_step_id:self.workflow_step.id,target_language_id:language,file_id:file,task:self.getTaskHash(),task_id:crowdin.editor.task.id||undefined},(function(data){if(data.success){var progress=data.items[0];if(progress.file_id!=file||progress.language_id!==parseInt(language)){return}self.file.progress=progress;self.view.setState({updatePhrases:false})}}),null,false,true)}},{key:"afterChangeEditorFile",value:function afterChangeEditorFile(update_history){update_history=typeof update_history!=="undefined"?update_history:true;if(update_history){if(history&&!history.state||history.state.file_id!=this.file.id){setHistory({file_id:this.file.id,target_language_id:this.target_language.id,workflow_step_id:this.workflow_step.id,task_hash:this.task.hash,query:crowdin.phrases?crowdin.phrases.query:""},crowdin.helpers.url.buildEditorPath({file_id:this.file.id}),"push")}}this.getProgress();this.updateTitle()}},{key:"afterChangeEditorLanguageOrStep",value:function afterChangeEditorLanguageOrStep(updateHistory,components,crowdinTranslateMTLanguageSupport){updateHistory=typeof updateHistory!=="undefined"?updateHistory:true;var currentComponents={file_id:crowdin.editor.file&&crowdin.editor.file.id||null,target_language_id:crowdin.editor.target_language&&crowdin.editor.target_language.id||null,workflow_step_id:crowdin.editor.workflow_step.id||null,task_hash:crowdin.editor.task.hash||null,query:crowdin.phrases?crowdin.phrases.query:""};components=$.extend({},currentComponents,components);var stateChanged=false;var currentState=history&&history.state||{};for(var i in currentState){if(currentState[i]!=components[i]){stateChanged=true}}if(updateHistory&&(history&&!history.state||stateChanged)){var pathUrlData={};if(components.workflow_step_id){pathUrlData.workflow_step_id=components.workflow_step_id}if(!pathUrlData.workflow_step_id&&crowdin.helpers.url.getEditorInfo().workflowStepId){pathUrlData.workflow_step_id=crowdin.helpers.url.getEditorInfo().workflowStepId}if(components.target_language_id){pathUrlData.language_id=crowdin.editor.target_language.internal_code}setHistory(components,crowdin.helpers.url.buildEditorPath(pathUrlData),"push")}if(!crowdin.editor.modeAssets()){crowdin.models.mt.updateCrowdinTranslateEngineAccess(crowdinTranslateMTLanguageSupport)}this.getProgress()}},{key:"afterChangeTask",value:function afterChangeTask(){if(history&&!history.state||history.state.task_hash!=this.task.hash){setHistory({file_id:this.file?this.file.id:null,target_language_id:this.target_language.id,workflow_step_id:this.workflow_step.id,task_hash:this.task.hash,query:crowdin.phrases?crowdin.phrases.query:""},crowdin.helpers.url.deleteSearchParam("task"),"push")}this.getProgress()}},{key:"isDisabledWorkflowStep",value:function isDisabledWorkflowStep(){if(this.isOutOfWorkflowEditorMode()){return false}if(this.project.has_advanced_workflow&&(!this.workflow_steps.length||!this.workflow_step.id)){return true}for(var i=0;i<this.workflow_steps.length;i++){if(this.workflow_steps[i].disabled&&this.workflow_step.id==this.workflow_steps[i].id){return true}}return false}},{key:"isNotLoadedWorkflowStep",value:function isNotLoadedWorkflowStep(){return this.project.has_advanced_workflow&&this.workflow_step.id===undefined&&!this.isOutOfWorkflowEditorMode()}},{key:"isValidWorkflowStep",value:function isValidWorkflowStep(){if(!this.project.has_advanced_workflow||this.isOutOfWorkflowEditorMode()){return true}return this.workflow_steps.length>0&&!this.isNotLoadedWorkflowStep()&&!this.isDisabledWorkflowStep()}},{key:"isOutOfWorkflowEditorMode",value:function isOutOfWorkflowEditorMode(){var isOutOfWorkflowEditorMode=this.project.has_advanced_workflow&&!this.urlHasStep()&&!this.workflow_step.id;var isCrowdsourceUser=crowdin.editor.workflow_steps.length===1&&crowdin.editor.workflow_steps[0].type==="Crowdsource";if(!this.urlHasStep()&&(isCrowdsourceUser||!crowdin.user.hasManagerAccessToProject())){return false}return isOutOfWorkflowEditorMode}},{key:"isWorkflowStep",value:function isWorkflowStep(){return this.project.has_advanced_workflow&&!this.isOutOfWorkflowEditorMode()}},{key:"addAdditionalBodyClasses",value:function addAdditionalBodyClasses(){var additionalBodyClasses=[this.mode];IS_MOBILE&&additionalBodyClasses.push("mobile-view");this.jipt_mode&&additionalBodyClasses.push("jipt-mode without-header");$("body").addClass(additionalBodyClasses.join(" "))}},{key:"initWsUser",value:function initWsUser(){var time=(new Date).getTime();this.ws_hash_user_key=MD5(crowdin.user.id+time)}},{key:"setColorTheme",value:function setColorTheme(theme){var $htmlIframeBody=$("#html_frame").contents().find("body");var darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)");var isDarkThemePreferred=darkModeMediaQuery.matches;var darkThemeClassName="dark-theme";if(theme===crowdin_editor_settings.colorScheme()["default"]&&isDarkThemePreferred||theme===crowdin_editor_settings.colorScheme().dark){$("body").addClass(darkThemeClassName);if($htmlIframeBody.length){$htmlIframeBody.addClass(darkThemeClassName)}}else{$("body").removeClass(darkThemeClassName);if($htmlIframeBody.length){$htmlIframeBody.removeClass(darkThemeClassName)}}}},{key:"subscribe",value:function subscribe(lang_id){if(crowdin.editor.modeAssets()){return}var event=this.getWSEventName(lang_id);if(crowdin.websocket.connected()){crowdin.websocket.subscribe(event,(function(data){if(data["ws_hash_user_key"]==undefined||data["ws_hash_user_key"]!=this.ws_hash_user_key){crowdin.editor.invoke("clearModels")}}))}}},{key:"unsubscribe",value:function unsubscribe(lang_id){if(crowdin.editor.modeAssets()){return}var event=this.getWSEventName(lang_id);if(crowdin.websocket.connected()){crowdin.websocket.unsubscribe(event)}}},{key:"subscribeNotifications",value:function subscribeNotifications(){var _this2=this;var event=this.getWSNotificationsEventName();if(crowdin.websocket.connected()){crowdin.websocket.subscribe(event,(function(data){return data&&_this2.invoke("upcomingNotifications",data)}))}}},{key:"fit_dialog",value:function fit_dialog(dialog){if(!IS_MOBILE&&!crowdin.editor.jipt_mode){var padding=dialog.outerHeight()-dialog.height();dialog.css("max-height",Math.min(document.body.clientHeight-119-padding,600))}}},{key:"check_show_placeholders",value:function check_show_placeholders(id){var show_placeholders=crowdin.user.settings.editor_show_placeholders;if(show_placeholders==="default"){var translation=crowdin.translation.get_translation(id);if(!translation.file_type){var phrases=crowdin.phrases.phrases;for(var j in phrases){var translation_obj=crowdin.editor.modeReviewProofread()?phrases[j].translation:phrases[j];if(translation_obj.id==id){translation=translation_obj;break}}}if(!translation.file_type){return true}return $.inArray(this.getBaseFileType(translation.file_type),this.show_placeholders_filetypes)!==-1}else if(show_placeholders==="true"){return true}return false}},{key:"setFile",value:function setFile(file){this.file=file;this.is_glossary_file=this.file.type==="glossary"}},{key:"setAllFiles",value:function setAllFiles(){this.file={id:"all",export_ready:0,upload_ready:0,export_xliff_ready:1,type:"",note:""};this.is_glossary_file=false}},{key:"getBaseFileType",value:function getBaseFileType(type){type=type?type:this.file?this.file.type:null;if(type){return type.replace(/\d+$/g,"")}return""}},{key:"getFileUrl",value:function getFileUrl(file_id){return this.getCustomFileUrl(file_id,this.mode)}},{key:"getCustomFileUrl",value:function getCustomFileUrl(file_id,mode){var fileId=IS_STRINGS_BASED_PROJECT?"all":file_id;return crowdin.helpers.url.buildEditorPath({mode:mode,project_identifier:this.project.identifier,file_id:fileId,language_id:this.target_language.internal_code,workflow_step_id:this.workflow_step.id,options:{preserve_hash:false,preserve_search_query:false}})}},{key:"getFileView",value:function getFileView(file){var file_type=file&&file.type||"";var html_preview=file&&file.html_preview||false;if(file_type==="assets"){return"assets"}if(this.modeReviewProofread()){return this.mode}return html_preview?"html":"basic"}},{key:"isAbleToHtmlPreview",value:function isAbleToHtmlPreview(file){return file&&file.html_preview?true:false}},{key:"updateLanguage",value:function updateLanguage(language_id,update_history){var self=this;if(self.target_language){if(+self.target_language.id===+language_id){return false}}var currentTargetLanguage=crowdin.editor.target_language;var workflowStepId=crowdin.editor.workflow_step.id||crowdin.editor.out_of_scope_workflow_step&&crowdin.editor.out_of_scope_workflow_step.id;crowdin.ajax.getData("/editor/change_language",{project_id:this.project.id,target_language_id:language_id,editor_mode:crowdin.editor.mode,workflow_step_id:workflowStepId},(function(response){if(response.redirect){window.location.href=response.redirect}if(response.success){!$.isEmptyObject(currentTargetLanguage)&&self.unsubscribe(currentTargetLanguage.id);!$.isEmptyObject(currentTargetLanguage)&&self.invoke("clearModels")}self.target_language=response.target_language;self.workflow_steps=response.workflow_steps;self.out_of_scope_workflow_step=response.out_of_scope_workflow_step;crowdin.user.is_leader=response.user_is_leader;crowdin.user.may_download=response.user_may_download;crowdin.user.workflow_step_id=response.workflow_step_id;if(response.success){self.out_of_scope_target_lang=null;self.afterChangeEditorLanguageOrStep(update_history,{target_language_id:self.target_language.id,workflow_step_id:self.workflow_step.id},+response.crowdin_translate_mt_language_support);self.invoke("updateLanguage");self.subscribe(language_id)}self.layout.hideMenu();if(self.target_language){self.modeAssets()?crowdin.translation.select_language():crowdin.phrases.select_language();if(crowdin.editor.isAllowedLanguageOnStep(response.target_language)){if(!crowdin.editor.modeReviewProofread()){crowdin.translation.refresh()}}}else{self.modeAssets()?crowdin.translation.select_language():crowdin.phrases.refresh()}!self.file&&self.target_language&&crowdin.plugins.open_file.run();var viewState=response.success?{updatePhrases:false}:self.view.getInitialState();self.view.setState(viewState);AppEvent.dispatchLanguageChange()}))}},{key:"changeWorkflowStep",value:function changeWorkflowStep(workflowStepId,updateHistory){var self=this;crowdin.ajax.getData("/editor/change_step",{project_id:this.project.id,target_language_id:self.target_language?self.target_language.id:self.out_of_scope_target_lang.id,workflow_step_id:workflowStepId,editor_mode:self.mode},(function(response){if(response.redirect){window.location.href=response.redirect}if(!response.error){crowdin.user.is_leader=response.user_is_leader;crowdin.editor.source_language=response.workflow_step.source_language;crowdin.editor.target_language=response.target_language;self.workflow_steps=response.workflow_steps;self.out_of_scope_workflow_step=response.workflow_step;self.out_of_scope_target_lang=response.out_of_scope_target_lang;self.setCurrentWorkflowStep(response.workflow_step);if(response.success){self.invoke("clearModels");self.afterChangeEditorLanguageOrStep(updateHistory,{target_language_id:self.target_language.id,workflow_step_id:workflowStepId},+response.crowdin_translate_mt_language_support);self.layout.hideMenu()}}crowdin.phrases.refresh();!self.file&&self.workflow_step.id&&crowdin.plugins.open_file.run();var viewState=response.success?{updatePhrases:false}:self.view.getInitialState();self.view.setState(viewState)}))}},{key:"openTask",value:function openTask(taskHash){var self=this;var _updateEditorData=function _updateEditorData(){self.afterChangeTask();var translation=crowdin.translation&&crowdin.translation.get_translation()||{};if(!crowdin.editor.isAllFilesSelected()&&crowdin.editor.modeTranslate()&&(translation.has_html_preview||crowdin.editor.html_preview)){crowdin.phrases.source_file_loaded()}crowdin.phrases.refresh();crowdin.plugins.open_file.files.options.params.task=self.getTaskHash();crowdin.plugins.open_file.files.refresh();crowdin.editor.view.setState({updatePhrases:false})};if(taskHash){crowdin.ajax.getData("/editor/open_task",{project_id:this.project.id,task:taskHash},(function(response){self.invoke("clearModels");crowdin.editor.task=response.success?response.task:{id:null};_updateEditorData()}))}else{crowdin.editor.task={id:null};_updateEditorData()}}},{key:"trackProject",value:function trackProject(){var self=this;crowdin.ajax.getData("/project_actions/track_project",{project_id:this.project.id},(function(response){if(response.success){crowdin.trackEvent("Active Projects","Project",self.project.identifier)}}))}},{key:"isAllFilesSelected",value:function isAllFilesSelected(){return this.file&&this.file.id==="all"}},{key:"modeReview",value:function modeReview(){return this.mode===this.MODE_NAME_REVIEW}},{key:"modeTranslate",value:function modeTranslate(){return this.mode===this.MODE_NAME_TRANSLATE}},{key:"modeProofread",value:function modeProofread(){return this.mode===this.MODE_NAME_PROOFREAD}},{key:"modeReviewProofread",value:function modeReviewProofread(){var MODE_NAME_REVIEW=this.MODE_NAME_REVIEW,MODE_NAME_PROOFREAD=this.MODE_NAME_PROOFREAD;return[MODE_NAME_REVIEW,MODE_NAME_PROOFREAD].indexOf(this.mode)!==-1}},{key:"modeTranslateProofread",value:function modeTranslateProofread(){var MODE_NAME_TRANSLATE=this.MODE_NAME_TRANSLATE,MODE_NAME_PROOFREAD=this.MODE_NAME_PROOFREAD;return[MODE_NAME_TRANSLATE,MODE_NAME_PROOFREAD].indexOf(this.mode)!==-1}},{key:"modeAssets",value:function modeAssets(){return this.mode===this.MODE_NAME_ASSETS}},{key:"getWSEventName",value:function getWSEventName(lang_id){lang_id="lang"+lang_id;var upload_translation_event=[this.project.wshash,this.project.id,lang_id];return upload_translation_event.join(":")}},{key:"getWSNotificationsEventName",value:function getWSNotificationsEventName(){var notificationsEvent=["unread",crowdin.user.user_ws_hash,crowdin.user.id];return notificationsEvent.join(":")}},{key:"stepTypeTranslate",value:function stepTypeTranslate(){return this.workflow_step.type&&this.workflow_step.type===this.WF_STEP_TYPE_TRANSLATE}},{key:"stepTypeProofread",value:function stepTypeProofread(){return this.workflow_step.type&&this.workflow_step.type===this.WF_STEP_TYPE_PROOFREAD}},{key:"stepTypeTranslateByVendor",value:function stepTypeTranslateByVendor(){return this.workflow_step.type&&this.workflow_step.type===this.WF_STEP_TYPE_TRANSLATE_BY_VENDOR}},{key:"stepTypeProofreadByVendor",value:function stepTypeProofreadByVendor(){return this.workflow_step.type&&this.workflow_step.type===this.WF_STEP_TYPE_PROOFREAD_BY_VENDOR}},{key:"stepTypeSourceTextReview",value:function stepTypeSourceTextReview(){return this.workflow_step.type&&this.workflow_step.type===this.WF_STEP_TYPE_SOURCE_TEXT_REVIEW}},{key:"stepTypeCrowdsource",value:function stepTypeCrowdsource(){return this.workflow_step.type&&this.workflow_step.type===this.WF_STEP_TYPE_CROWDSOURCE}},{key:"getWorkflowStepById",value:function getWorkflowStepById(id){return this.workflow_steps.filter((function(wfStep){return+wfStep.id===+id}))[0]}},{key:"setCurrentWorkflowStep",value:function setCurrentWorkflowStep(step){this.workflow_step=step||{id:null}}},{key:"approvingAvailable",value:function approvingAvailable(){if(!this.project.has_advanced_workflow){return crowdin.user.is_leader}return crowdin.user.is_leader&&this.workflow_step.approving_available}},{key:"translateHiddenAvailable",value:function translateHiddenAvailable(){return crowdin.user.has_access_to_hidden_strings}},{key:"getTaskHash",value:function getTaskHash(){return crowdin.editor.task.hash?crowdin.editor.task.hash:undefined}},{key:"isUploadTranslationsAvailable",value:function isUploadTranslationsAvailable(){return crowdin.user.may_download&&this.file&&(this.file.upload_ready||this.file.export_xliff_ready)}},{key:"urlHasStep",value:function urlHasStep(){return Boolean(crowdin.helpers.url.getEditorInfo().workflowStepId)}},{key:"isAvailableRepairTmSuggestion",value:function isAvailableRepairTmSuggestion(){return this.repair_tm_suggestion.is_available&&this.repair_tm_suggestion.supported_language_pairs[this.source_language.generic_code]&&this.repair_tm_suggestion.supported_language_pairs[this.source_language.generic_code].indexOf(this.target_language.generic_code)!==-1}},{key:"isAllowedLanguageOnStep",value:function isAllowedLanguageOnStep(language){if(crowdin.editor.project.has_advanced_workflow&&crowdin.editor.workflow_step.id&&language){for(var i in crowdin.editor.workflow_step.languages){if(+crowdin.editor.workflow_step.languages[i].id===+language.id){return true}}return false}return true}},{key:"updateOnboarding",value:function updateOnboarding(){var mode=crowdin.editor.mode;crowdin.ajax.postData("/editor/close_onboarding",{project_id:crowdin.editor.project.id,onboarding:{mode:mode}},(function(data){if(((data||{}).data||{}).success){crowdin.user.settings.editor_onboarding[mode].show=false}}))}}]);return crowdin_editor}(CrowdinComponent);
