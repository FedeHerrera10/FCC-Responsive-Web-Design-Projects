"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var crowdin_hotkeys=function(_CrowdinComponent){_inherits(crowdin_hotkeys,_CrowdinComponent);var _super=_createSuper(crowdin_hotkeys);function crowdin_hotkeys(){var _this;_classCallCheck(this,crowdin_hotkeys);_this=_super.call(this);_this.getLabel=_this.getLabel.bind(_assertThisInitialized(_this));_this.convertToMacView=_this.convertToMacView.bind(_assertThisInitialized(_this));_this.getHotkeyString=_this.getHotkeyString.bind(_assertThisInitialized(_this));_this.hotkeys_other={};_this.hotkeys_mac={};_this.hotkey_label={};_this.review_hotkey_label={};_this.assets_hotkey_label={};_this.FOCUS_MENU_KEY="focus_menu_key";_this.KEYBOARD_SHORTCUTS_KEY="keyboard_shortcuts_key";_this.CHOOSE_SUGGESTION_KEY="choose_suggestion_key";_this.SAVE_SUGGESTION_KEY="save_suggestion_key";_this.SAVE_COMMENT_KEY="save_comment_key";_this.SAVE_CONTEXT_KEY="save_context_key";_this.NEXT_TRANSLATION_KEY="next_translation_key";_this.PREVIOUS_TRANSLATION_KEY="previous_translation_key";_this.TOGGLE_RIGHT_PANEL_KEY="toggle_right_panel_key";_this.COPY_SOURCE_KEY="copy_source_key";_this.COPY_SOURCE_SKELETON_KEY="copy_source_skeleton_key";_this.APPROVE_KEY="approve_key";_this.DISAPPROVE_KEY="disapprove_key";_this.VOTE_PLUS_KEY="vote_plus_key";_this.VOTE_MINUS_KEY="vote_minus_key";_this.STRING_KEY="string_key";_this.CONTEXT_KEY="context_key";_this.EDIT_CONTEXT_KEY="edit_context_key";_this.REQUEST_CONTEXT_KEY="request_context_key";_this.SEARCH_KEY="search_key";_this.REPLACE_KEY="replace_key";_this.OPEN_FILE_KEY="open_file_key";_this.AUTOCOMPLETE_KEY="autocomplete_key";_this.TOGGLE_LEFT_PANEL_KEY="toggle_left_panel_key";_this.SEARCH_TM_KEY="search_tm_key";_this.ADD_TERM_KEY="add_term_key";_this.SEARCH_GLOSSARY_KEY="search_glossary_key";_this.SOURCE_FILE_PREVIEW_KEY="source_file_preview_key";_this.TRANSLATED_FILE_PREVIEW_KEY="translated_file_preview_key";_this.CLEAR_TRANSLATION_KEY="clear_translation_key";_this.DOWNLOAD_KEY="download_key";_this.DOWNLOAD_XLIFF_KEY="download_xliff_key";_this.UPLOAD_KEY="upload_key";_this.ALL_STRINGS_KEY="all_strings_key";_this.QUIT_EDITOR_KEY="quit_editor_key";_this.SELECTION_TO_LOWERCASE_KEY="selection_to_lowercase_key";_this.SELECTION_TO_UPPERCASE_KEY="selection_to_uppercase_key";_this.INPUT_UNDO_KEY="input_undo_key";_this.INPUT_REDO_KEY="input_redo_key";_this.ADD_COMMENT_KEY="add_comment_key";_this.TOGGLE_TAGS_HIGHLIGHT_KEY="toggle_tags_highlight_key";_this.COPY_NEXT_TAG="copy_next_tag";_this.OPEN_SCREENSHOT_KEY="open_screenshot_key";_this.hotkeys_other[_this.CHOOSE_SUGGESTION_KEY]="Ctrl+{1-9}";_this.hotkeys_other[_this.FOCUS_MENU_KEY]="Ctrl+/";_this.hotkeys_other[_this.KEYBOARD_SHORTCUTS_KEY]="Ctrl+Shift+/";_this.hotkeys_other[_this.SAVE_SUGGESTION_KEY]="Ctrl+Enter";_this.hotkeys_other[_this.SAVE_COMMENT_KEY]="Ctrl+Enter";_this.hotkeys_other[_this.SAVE_CONTEXT_KEY]="Ctrl+Enter";_this.hotkeys_other[_this.NEXT_TRANSLATION_KEY]="Ctrl+Down";_this.hotkeys_other[_this.PREVIOUS_TRANSLATION_KEY]="Ctrl+Up";_this.hotkeys_other[_this.TOGGLE_RIGHT_PANEL_KEY]="Alt+]";_this.hotkeys_other[_this.COPY_SOURCE_KEY]="Ctrl+Shift+C";_this.hotkeys_other[_this.COPY_SOURCE_SKELETON_KEY]="Alt+Ctrl+Shift+C";_this.hotkeys_other[_this.APPROVE_KEY]="Alt+Enter";_this.hotkeys_other[_this.DISAPPROVE_KEY]="Alt+Shift+Enter";_this.hotkeys_other[_this.VOTE_PLUS_KEY]="Alt+Enter";_this.hotkeys_other[_this.VOTE_MINUS_KEY]="Alt+Shift+Enter";_this.hotkeys_other[_this.STRING_KEY]="Ctrl+Shift+H";_this.hotkeys_other[_this.CONTEXT_KEY]="Ctrl+Shift+Down";_this.hotkeys_other[_this.EDIT_CONTEXT_KEY]="Ctrl+Shift+K";_this.hotkeys_other[_this.REQUEST_CONTEXT_KEY]="Ctrl+Shift+K";_this.hotkeys_other[_this.SEARCH_KEY]="Ctrl+F";_this.hotkeys_other[_this.REPLACE_KEY]="Ctrl+R";_this.hotkeys_other[_this.OPEN_FILE_KEY]="Ctrl+O";_this.hotkeys_other[_this.AUTOCOMPLETE_KEY]="Alt+Space";_this.hotkeys_other[_this.TOGGLE_LEFT_PANEL_KEY]="Alt+[";_this.hotkeys_other[_this.SEARCH_TM_KEY]="Ctrl+Shift+M";_this.hotkeys_other[_this.SEARCH_GLOSSARY_KEY]="Ctrl+Shift+G";_this.hotkeys_other[_this.ADD_TERM_KEY]="Ctrl+G";_this.hotkeys_other[_this.SOURCE_FILE_PREVIEW_KEY]="Ctrl+Shift+P";_this.hotkeys_other[_this.TRANSLATED_FILE_PREVIEW_KEY]="Ctrl+P";_this.hotkeys_other[_this.CLEAR_TRANSLATION_KEY]="Ctrl+D";_this.hotkeys_other[_this.DOWNLOAD_KEY]="Ctrl+S";_this.hotkeys_other[_this.DOWNLOAD_XLIFF_KEY]="Ctrl+Shift+S";_this.hotkeys_other[_this.UPLOAD_KEY]="Ctrl+Insert";_this.hotkeys_other[_this.ALL_STRINGS_KEY]="Ctrl+Shift+A";_this.hotkeys_other[_this.QUIT_EDITOR_KEY]="Ctrl+Q";_this.hotkeys_other[_this.INPUT_UNDO_KEY]="Ctrl+Z";_this.hotkeys_other[_this.INPUT_REDO_KEY]="Ctrl+Y";_this.hotkeys_other[_this.SELECTION_TO_LOWERCASE_KEY]="Ctrl+U";_this.hotkeys_other[_this.SELECTION_TO_UPPERCASE_KEY]="Ctrl+Shift+U";_this.hotkeys_other[_this.ADD_COMMENT_KEY]="Ctrl+M";_this.hotkeys_other[_this.TOGGLE_TAGS_HIGHLIGHT_KEY]="Ctrl+Space";_this.hotkeys_other[_this.COPY_NEXT_TAG]="Alt+Right";_this.hotkeys_other[_this.OPEN_SCREENSHOT_KEY]="Ctrl+F1";_this.hotkeys_mac[_this.CHOOSE_SUGGESTION_KEY]="Control+{1-9}";_this.hotkeys_mac[_this.FOCUS_MENU_KEY]="Shift+Command+M";_this.hotkeys_mac[_this.KEYBOARD_SHORTCUTS_KEY]="Shift+Command+K";_this.hotkeys_mac[_this.SAVE_SUGGESTION_KEY]="Command+Enter";_this.hotkeys_mac[_this.SAVE_COMMENT_KEY]="Command+Enter";_this.hotkeys_mac[_this.SAVE_CONTEXT_KEY]="Command+Enter";_this.hotkeys_mac[_this.NEXT_TRANSLATION_KEY]="Command+]";_this.hotkeys_mac[_this.PREVIOUS_TRANSLATION_KEY]="Command+[";_this.hotkeys_mac[_this.TOGGLE_RIGHT_PANEL_KEY]="Control+]";_this.hotkeys_mac[_this.COPY_SOURCE_KEY]="Control+Shift+C";_this.hotkeys_mac[_this.COPY_SOURCE_SKELETON_KEY]="Control+Shift+Command+C";_this.hotkeys_mac[_this.APPROVE_KEY]="Shift+Command+A";_this.hotkeys_mac[_this.DISAPPROVE_KEY]="Shift+Command+U";_this.hotkeys_mac[_this.VOTE_PLUS_KEY]="Shift+Command+A";_this.hotkeys_mac[_this.VOTE_MINUS_KEY]="Shift+Command+U";_this.hotkeys_mac[_this.STRING_KEY]="Shift+Command+H";_this.hotkeys_mac[_this.CONTEXT_KEY]="Control+Shift+Down";_this.hotkeys_mac[_this.EDIT_CONTEXT_KEY]="Shift+Command+E";_this.hotkeys_mac[_this.REQUEST_CONTEXT_KEY]="Shift+Command+E";_this.hotkeys_mac[_this.SEARCH_KEY]="Command+F";_this.hotkeys_mac[_this.REPLACE_KEY]="Control+R";_this.hotkeys_mac[_this.OPEN_FILE_KEY]="Command+O";_this.hotkeys_mac[_this.AUTOCOMPLETE_KEY]="Option+Space";_this.hotkeys_mac[_this.TOGGLE_LEFT_PANEL_KEY]="Control+[";_this.hotkeys_mac[_this.SEARCH_TM_KEY]="Control+Shift+T";_this.hotkeys_mac[_this.SEARCH_GLOSSARY_KEY]="Control+Shift+G";_this.hotkeys_mac[_this.ADD_TERM_KEY]="Control+G";_this.hotkeys_mac[_this.SOURCE_FILE_PREVIEW_KEY]="Shift+Command+P";_this.hotkeys_mac[_this.TRANSLATED_FILE_PREVIEW_KEY]="Command+P";_this.hotkeys_mac[_this.CLEAR_TRANSLATION_KEY]="Command+D";_this.hotkeys_mac[_this.DOWNLOAD_KEY]="Command+S";_this.hotkeys_mac[_this.DOWNLOAD_XLIFF_KEY]="Shift+Command+S";_this.hotkeys_mac[_this.UPLOAD_KEY]="Command+U";_this.hotkeys_mac[_this.ALL_STRINGS_KEY]="Control+Shift+A";_this.hotkeys_mac[_this.QUIT_EDITOR_KEY]="Control+W";_this.hotkeys_mac[_this.INPUT_UNDO_KEY]="Command+Z";_this.hotkeys_mac[_this.INPUT_REDO_KEY]="Shift+Command+Z";_this.hotkeys_mac[_this.SELECTION_TO_LOWERCASE_KEY]="Control+Shift+I";_this.hotkeys_mac[_this.SELECTION_TO_UPPERCASE_KEY]="Control+Shift+U";_this.hotkeys_mac[_this.ADD_COMMENT_KEY]="Control+M";_this.hotkeys_mac[_this.TOGGLE_TAGS_HIGHLIGHT_KEY]="Control+Shift+V";_this.hotkeys_mac[_this.COPY_NEXT_TAG]="Control+Shift+.";_this.hotkeys_mac[_this.OPEN_SCREENSHOT_KEY]="Control+Shift+S";_this.hotkey_label[_this.FOCUS_MENU_KEY]=_l("editor.focusMenu");_this.hotkey_label[_this.KEYBOARD_SHORTCUTS_KEY]=_l("editor.displayKeyboardShortcuts");_this.hotkey_label[_this.SAVE_SUGGESTION_KEY]=_l("editor.saveTranslation");_this.hotkey_label[_this.NEXT_TRANSLATION_KEY]=_l("editor.moveToNextString");_this.hotkey_label[_this.PREVIOUS_TRANSLATION_KEY]=_l("editor.moveToPreviousString");_this.hotkey_label[_this.TOGGLE_RIGHT_PANEL_KEY]=_l("editor.showHideRigthPanel");_this.hotkey_label[_this.COPY_SOURCE_KEY]=_l("editor.copySourceToTarget");_this.hotkey_label[_this.COPY_SOURCE_SKELETON_KEY]=_l("editor.copySourceSkeletonToTarget");_this.hotkey_label[_this.APPROVE_KEY]=_l("editor.approve");_this.hotkey_label[_this.DISAPPROVE_KEY]=_l("editor.unapprove");_this.hotkey_label[_this.VOTE_PLUS_KEY]=_l("editor.voteUp");_this.hotkey_label[_this.VOTE_MINUS_KEY]=_l("editor.voteDown");_this.hotkey_label[_this.STRING_KEY]=_l("editor.showHideString");_this.hotkey_label[_this.CONTEXT_KEY]=_l("editor.showHideStringContext");_this.hotkey_label[_this.EDIT_CONTEXT_KEY]=_l("editor.editContext");_this.hotkey_label[_this.REQUEST_CONTEXT_KEY]=_l("editor.requestContext");_this.hotkey_label[_this.SEARCH_KEY]=_l("editor.searchString");_this.hotkey_label[_this.REPLACE_KEY]=_l("editor.replaceInTranslations");_this.hotkey_label[_this.OPEN_FILE_KEY]=_l("editor.openFile");_this.hotkey_label[_this.AUTOCOMPLETE_KEY]=_l("editor.showAutocompletePopUp");_this.hotkey_label[_this.TOGGLE_LEFT_PANEL_KEY]=_l("editor.showHideLeftPanel");_this.hotkey_label[_this.SEARCH_TM_KEY]=_l("editor.searchTranslationMemory");_this.hotkey_label[_this.SEARCH_GLOSSARY_KEY]=_l("editor.searchGlossary");_this.hotkey_label[_this.ADD_TERM_KEY]=_l("editor.addTerm");_this.hotkey_label[_this.SOURCE_FILE_PREVIEW_KEY]=_l("editor.previewSourceFile");_this.hotkey_label[_this.TRANSLATED_FILE_PREVIEW_KEY]=_l("editor.previewTranslatedFile");_this.hotkey_label[_this.CLEAR_TRANSLATION_KEY]=_l("editor.clearTranslation");_this.hotkey_label[_this.DOWNLOAD_KEY]=_l("editor.downloadTranslatedFile");_this.hotkey_label[_this.DOWNLOAD_XLIFF_KEY]=_l("editor.downloadAsXLIFF");_this.hotkey_label[_this.UPLOAD_KEY]=_l("editor.uploadTranslations");_this.hotkey_label[_this.ALL_STRINGS_KEY]=_l("editor.allProjectStrings");_this.hotkey_label[_this.QUIT_EDITOR_KEY]=_l("editor.quitEditor");_this.hotkey_label[_this.SELECTION_TO_LOWERCASE_KEY]=_l("editor.transformToLowercase");_this.hotkey_label[_this.SELECTION_TO_UPPERCASE_KEY]=_l("editor.transformToUppercase");_this.hotkey_label[_this.INPUT_UNDO_KEY]=_l("editor.inputUndo");_this.hotkey_label[_this.INPUT_REDO_KEY]=_l("editor.inputRedo");_this.hotkey_label[_this.ADD_COMMENT_KEY]=_l("editor.addComment");_this.hotkey_label[_this.TOGGLE_TAGS_HIGHLIGHT_KEY]=_l("editor.toggleHighlightTags");_this.hotkey_label[_this.COPY_NEXT_TAG]=_l("editor.copyNextTag");_this.hotkey_label[_this.CHOOSE_SUGGESTION_KEY]=_l("editor.useSuggestion");_this.hotkey_label[_this.OPEN_SCREENSHOT_KEY]=_l("editor.openScreenshot");_this.review_hotkey_label[_this.SAVE_SUGGESTION_KEY]=_l("editor.saveCorrection");_this.review_hotkey_label[_this.NEXT_TRANSLATION_KEY]=_l("editor.skipString");_this.review_hotkey_label[_this.PREVIOUS_TRANSLATION_KEY]=_l("editor.previousString");_this.review_hotkey_label[_this.COPY_SOURCE_KEY]=_l("editor.copyCorrectionFromSource");_this.review_hotkey_label[_this.COPY_SOURCE_SKELETON_KEY]=_l("editor.copySourceSkeletonIntoCorrectionField");_this.review_hotkey_label[_this.REPLACE_KEY]=_l("editor.replaceInCorrections");_this.review_hotkey_label[_this.CHOOSE_SUGGESTION_KEY]=_l("editor.useCorrection");_this.assets_hotkey_label[_this.NEXT_TRANSLATION_KEY]=_l("editor.nextFile");_this.assets_hotkey_label[_this.PREVIOUS_TRANSLATION_KEY]=_l("editor.previousFile");_this.assets_hotkey_label[_this.CONTEXT_KEY]=_l("editor.showHideFileContext");_this.assets_hotkey_label[_this.EDIT_CONTEXT_KEY]=_l("editor.editContext");_this.disable_jipt_mode_hotkeys=[_this.SEARCH_KEY,_this.UPLOAD_KEY,_this.DOWNLOAD_KEY,_this.OPEN_FILE_KEY,_this.QUIT_EDITOR_KEY,_this.ALL_STRINGS_KEY,_this.AUTOCOMPLETE_KEY,_this.DOWNLOAD_XLIFF_KEY,_this.TOGGLE_LEFT_PANEL_KEY];_this.disable_strings_based_project_hotkeys=[_this.OPEN_FILE_KEY];_this.fixed_keys=[_this.INPUT_UNDO_KEY,_this.INPUT_REDO_KEY,_this.SAVE_COMMENT_KEY,_this.SAVE_CONTEXT_KEY];_this.open_menu_hotkeys=[_this.UPLOAD_KEY,_this.REPLACE_KEY,_this.DOWNLOAD_KEY,_this.OPEN_FILE_KEY,_this.ALL_STRINGS_KEY,_this.QUIT_EDITOR_KEY,_this.DOWNLOAD_XLIFF_KEY,_this.SOURCE_FILE_PREVIEW_KEY,_this.TRANSLATED_FILE_PREVIEW_KEY];_this.categories={FIRST:1,SECOND:2,THIRD:3,FOURTH:4,FIFTH:5,SIXTH:6,SEVENTH:7,EIGHTH:8};_this.scopes={ALL:"all",DOCUMENT:"document",EDIT_DIALOG:"edit_dialog",CONTEXT_DIALOG:"context_dialog"};_this.keyboard_types={MACOS:"macos",OTHER:"other"};_this.initial_hotkeys="";_this.disable_hotkeys=["Tab","Pause","Clear","Escape","NumLock","CapsLock","ScrollLock","ContextMenu","AudioVolumeUp","MediaTrackNext","MediaPlayPause","AudioVolumeMute","AudioVolumeDown","MediaTrackPrevious"];_this.modifier_map=["metaKey","ctrlKey","shiftKey","altKey","key"];_this.key_map={Backquote:"`",Break:"Pause",Dash:"-",Minus:"-",Equal:"=",BracketLeft:"[",BracketRight:"]",IntlBackslash:is_mac?"`":"\\",Backslash:"\\",Semicolon:";",Quote:"'",Comma:",",Period:".",Slash:"/",ArrowUp:"Up",Numpad8:"Up",ArrowRight:"Right",ArrowDown:"Down",ArrowLeft:"Left",Numpad1:"End",Numpad2:"Down",Numpad3:"PageDown",Numpad4:"Left",Numpad6:"Right",Numpad7:"Home",Numpad9:"PageUp",NumpadEnter:"Enter",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0"};_this.keyCodeMap={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"Digit0",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",60:"IntlBackslash",65:"KeyA",66:"KeyB",67:"KeyC",68:"KeyD",69:"KeyE",70:"KeyF",71:"KeyG",72:"KeyH",73:"KeyI",74:"KeyJ",75:"KeyK",76:"KeyL",77:"KeyM",78:"KeyN",79:"KeyO",80:"KeyP",81:"KeyQ",82:"KeyR",83:"KeyS",84:"KeyT",85:"KeyU",86:"KeyV",87:"KeyW",88:"KeyX",89:"KeyY",90:"KeyZ",91:"MetaLeft",92:"MetaRight",93:"ContextMenu",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"ScrollLock",173:"AudioVolumeMute",174:"AudioVolumeDown",175:"AudioVolumeUp",176:"MediaTrackNext",177:"MediaTrackPrevious",179:"MediaPlayPause",186:"Semicolon",187:"Equal",188:"Comma",189:"Dash",190:"Period",191:"Slash",192:"Backquote",219:"BracketLeft",220:"Backslash",221:"BracketRight",222:"Quote"};_this.other_to_mac={Alt:"Option",Ctrl:"Control"};_this.macos_keys_icons=[{title:"Command",icon:"⌘",priority:3},{title:"Control",icon:"⌃",priority:0},{title:"Shift",icon:"⇧",priority:1},{title:"Option",icon:"⌥",priority:2},{title:"Enter",icon:"↩",priority:4}];_this.modifierKeys=["Control","Option","Command","Meta","Ctrl","Alt","Shift"];_this.default_hotkeys=$.extend({},is_mac?_this.hotkeys_mac:_this.hotkeys_other);if(Array.isArray(INIT_USER_HOTKEYS)&&!INIT_USER_HOTKEYS.length){INIT_USER_HOTKEYS=Object.assign({},{macos:null,other:null})}if(is_mac){for(var i in _this.hotkeys_mac){if(INIT_USER_HOTKEYS.macos&&INIT_USER_HOTKEYS.macos[i]){_this.hotkeys_mac[i]=INIT_USER_HOTKEYS.macos[i]}}}else{for(var _i in _this.hotkeys_other){if(INIT_USER_HOTKEYS.other&&INIT_USER_HOTKEYS.other[_i]){_this.hotkeys_other[_i]=INIT_USER_HOTKEYS.other[_i]}}}INIT_USER_HOTKEYS=null;_this.allowOnlyInputHotkey(false);return _this}_createClass(crowdin_hotkeys,[{key:"set",value:function set(key,value){is_mac?this.hotkeys_mac[key]=value:this.hotkeys_other[key]=value}},{key:"get",value:function get(key){return is_mac?this.hotkeys_mac[key]:this.hotkeys_other[key]}},{key:"getLabel",value:function getLabel(key){return is_mac?this.convertToMacView(this.hotkeys_mac[key]):this.hotkeys_other[key]}},{key:"generateFuncKeys",value:function generateFuncKeys(){return Array.apply(0,{length:19}).map((function(item,index){return"F".concat(index+1)}))}},{key:"cutOutWord",value:function cutOutWord(str,word){return str.replace(word,"")}},{key:"isControlKeys",value:function isControlKeys(_ref){var key=_ref.key;var funcKeys=["Control","Shift","Meta","Alt"];for(var i=0;i<=funcKeys.length;i++){var substring=funcKeys[i];if(key.indexOf(substring)!==-1){return substring}}return null}},{key:"isInputControlKeys",value:function isInputControlKeys(keyCode){var inputControlKeys=["Ctrl+Z","Ctrl+Y","Command+Z","Command+Y"];return inputControlKeys.indexOf(keyCode)!==-1}},{key:"convertToMacCommand",value:function convertToMacCommand(command){return this.other_to_mac[command]}},{key:"replaceCommandMeta",value:function replaceCommandMeta(shortcut){var result;if(shortcut.indexOf("Meta")!==-1){var regex=/Meta/gi;result=shortcut.replace(regex,"Command")}else if(shortcut.indexOf("Command")!==-1){var _regex=/Command/gi;result=shortcut.replace(_regex,"Meta")}else{result=shortcut}return result}},{key:"isDisabledHotkeys",value:function isDisabledHotkeys(hotkeyString){var _this2=this;var isDisabled=false;if(this.isInputControlKeys(hotkeyString)){isDisabled=true}var arrayFromHotkeyString=hotkeyString.split("+");if(arrayFromHotkeyString.length===1){var funcKeys=this.generateFuncKeys();var allowedSingleKeys=["Enter"].concat(funcKeys);isDisabled=allowedSingleKeys.indexOf(arrayFromHotkeyString[0])===-1}else if(arrayFromHotkeyString.length>1){if(arrayFromHotkeyString.every((function(item){return _this2.modifierKeys.indexOf(item)!==-1}))){isDisabled=true}else if(arrayFromHotkeyString.some((function(item){return _this2.modifierKeys.indexOf(item)!==-1}))){isDisabled=false}}return isDisabled}},{key:"allowModifiersOnly",value:function allowModifiersOnly(hotkeysString){var _this3=this;var strArray=hotkeysString.split("+");return strArray.filter((function(key){return _this3.modifierKeys.indexOf(key)!==-1})).join("+")}},{key:"isNumPadEvent",value:function isNumPadEvent(event){var result;if(event.code){if(event.code.indexOf("Numpad")!==-1){result=event.key.indexOf("Arrow")===-1&&event.key.indexOf("PageDown")===-1&&event.key.indexOf("PageUp")===-1&&event.key.indexOf("Enter")===-1&&event.key.indexOf("Home")===-1&&event.key.indexOf("End")===-1}else{result=false}}else result=event.keyCode>=96&&event.keyCode<=111;return result}},{key:"isDisabledHotkeyCode",value:function isDisabledHotkeyCode(event){var code;if(event.code){code=event.code}else if(this.eventHasOnlyKeycode(event)){if(this.keyCodeMap.hasOwnProperty(+event.keyCode)){code=this.keyCodeMap[+event.keyCode];if(this.key_map.hasOwnProperty(code)){code=this.key_map[code]}}}return this.disable_hotkeys.indexOf(code)!==-1}},{key:"eventHasOnlyKeycode",value:function eventHasOnlyKeycode(event){return!event.code&&!!event.key&&!!event.keyCode}},{key:"getHotkeyString",value:function getHotkeyString(event){var array=[];var modifierMap=this.modifier_map;var keyCodeMap=this.keyCodeMap;var keyMap=this.key_map;for(var i=0;i<modifierMap.length;i++){if(!this.isNumPadEvent(event)&&!this.isDisabledHotkeyCode(event)){if(modifierMap[i]!=="key"&&event[modifierMap[i]]){var controlLower=this.cutOutWord(modifierMap[i],"Key");var controlCapitalized=controlLower!=="meta"?controlLower.charAt(0).toUpperCase()+controlLower.substring(1):"Command";if(!is_mac&&controlCapitalized==="Command"){controlCapitalized="Meta"}if(is_mac&&(controlCapitalized==="Ctrl"||controlCapitalized==="Alt")){controlCapitalized=this.convertToMacCommand(controlCapitalized)}array.push(controlCapitalized)}else if(modifierMap[i]==="key"){if(!this.isControlKeys(event)){if(event.code){if(keyMap[event.code]){array.push(keyMap[event.code])}else if(event.code.indexOf("Key")!==-1){array.push(this.cutOutWord(event.code,"Key"))}else{array.push(event.code)}}else if(this.eventHasOnlyKeycode(event)){if(keyCodeMap.hasOwnProperty(+event.keyCode)){var code=keyCodeMap[+event.keyCode];if(keyMap[code]){array.push(keyMap[code])}else if(code.indexOf("Key")!==-1){array.push(this.cutOutWord(code,"Key"))}else{array.push(code)}}}}}}}return array.join("+")}},{key:"isFixedKey",value:function isFixedKey(key){return this.fixed_keys.indexOf(key)!==-1}},{key:"getAvailableHotkeys",value:function getAvailableHotkeys(){var _crowdin$editor=crowdin.editor,modeAssets=_crowdin$editor.modeAssets,modeReview=_crowdin$editor.modeReview,modeTranslate=_crowdin$editor.modeTranslate,modeProofread=_crowdin$editor.modeProofread,modeReviewProofread=_crowdin$editor.modeReviewProofread,modeTranslateProofread=_crowdin$editor.modeTranslateProofread;var all_hotkeys={};all_hotkeys[this.SAVE_SUGGESTION_KEY]={isAllowed:!modeAssets(),label:modeReview()?this.review_hotkey_label[this.SAVE_SUGGESTION_KEY]:this.hotkey_label[this.SAVE_SUGGESTION_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.SAVE_SUGGESTION_KEY)};all_hotkeys[this.PREVIOUS_TRANSLATION_KEY]={isAllowed:true,label:modeAssets()?this.assets_hotkey_label[this.PREVIOUS_TRANSLATION_KEY]:modeReview()?this.review_hotkey_label[this.PREVIOUS_TRANSLATION_KEY]:this.hotkey_label[this.PREVIOUS_TRANSLATION_KEY],scope:this.scopes.DOCUMENT,icon:"back",category:this.categories.FIRST,isBlocked:this.isFixedKey(this.PREVIOUS_TRANSLATION_KEY)};all_hotkeys[this.NEXT_TRANSLATION_KEY]={isAllowed:true,label:modeAssets()?this.assets_hotkey_label[this.NEXT_TRANSLATION_KEY]:modeReview()?this.review_hotkey_label[this.NEXT_TRANSLATION_KEY]:this.hotkey_label[this.NEXT_TRANSLATION_KEY],scope:this.scopes.DOCUMENT,icon:"next",category:this.categories.FIRST,isBlocked:this.isFixedKey(this.NEXT_TRANSLATION_KEY)};all_hotkeys[this.COPY_SOURCE_KEY]={isAllowed:!modeAssets(),label:modeReview()?this.review_hotkey_label[this.COPY_SOURCE_KEY]:this.hotkey_label[this.COPY_SOURCE_KEY],scope:this.scopes.DOCUMENT,icon:"copy",category:this.categories.FIRST,isBlocked:this.isFixedKey(this.COPY_SOURCE_KEY)};all_hotkeys[this.COPY_SOURCE_SKELETON_KEY]={isAllowed:!modeAssets(),label:modeReview()?this.review_hotkey_label[this.COPY_SOURCE_SKELETON_KEY]:this.hotkey_label[this.COPY_SOURCE_SKELETON_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.COPY_SOURCE_KEY)};all_hotkeys[this.SEARCH_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.SEARCH_KEY],scope:this.scopes.DOCUMENT,icon:"search",category:this.categories.FIRST,isBlocked:this.isFixedKey(this.SEARCH_KEY)};all_hotkeys[this.REPLACE_KEY]={isAllowed:!modeAssets(),label:modeReview()?this.review_hotkey_label[this.REPLACE_KEY]:this.hotkey_label[this.REPLACE_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.REPLACE_KEY)};all_hotkeys[this.CLEAR_TRANSLATION_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.CLEAR_TRANSLATION_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.CLEAR_TRANSLATION_KEY)};all_hotkeys[this.SELECTION_TO_LOWERCASE_KEY]={isAllowed:modeTranslateProofread(),label:this.hotkey_label[this.SELECTION_TO_LOWERCASE_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.SELECTION_TO_LOWERCASE_KEY)};all_hotkeys[this.SELECTION_TO_UPPERCASE_KEY]={isAllowed:modeTranslateProofread(),label:this.hotkey_label[this.SELECTION_TO_UPPERCASE_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.SELECTION_TO_UPPERCASE_KEY)};all_hotkeys[this.AUTOCOMPLETE_KEY]={isAllowed:modeTranslate()&&crowdin.user.settings.enable_autocomplete,label:this.hotkey_label[this.AUTOCOMPLETE_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.AUTOCOMPLETE_KEY)};all_hotkeys[this.INPUT_UNDO_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.INPUT_UNDO_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.INPUT_UNDO_KEY)};all_hotkeys[this.INPUT_REDO_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.INPUT_REDO_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,isBlocked:this.isFixedKey(this.INPUT_REDO_KEY)};all_hotkeys[this.CHOOSE_SUGGESTION_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.CHOOSE_SUGGESTION_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIRST,withModifier:true};all_hotkeys[this.APPROVE_KEY]={isAllowed:crowdin.user.is_leader,label:this.hotkey_label[this.APPROVE_KEY],scope:this.scopes.DOCUMENT,icon:"check",category:this.categories.SECOND,isBlocked:this.isFixedKey(this.APPROVE_KEY)};all_hotkeys[this.DISAPPROVE_KEY]={isAllowed:crowdin.user.is_leader,label:this.hotkey_label[this.DISAPPROVE_KEY],scope:this.scopes.DOCUMENT,category:this.categories.SECOND,isBlocked:this.isFixedKey(this.DISAPPROVE_KEY)};all_hotkeys[this.VOTE_PLUS_KEY]={isAllowed:!crowdin.user.is_leader,label:this.hotkey_label[this.VOTE_PLUS_KEY],scope:this.scopes.DOCUMENT,icon:"plus",category:this.categories.SECOND,isBlocked:this.isFixedKey(this.VOTE_PLUS_KEY)};all_hotkeys[this.VOTE_MINUS_KEY]={isAllowed:!crowdin.user.is_leader,label:this.hotkey_label[this.VOTE_MINUS_KEY],scope:this.scopes.DOCUMENT,icon:"minus",category:this.categories.SECOND,isBlocked:this.isFixedKey(this.VOTE_MINUS_KEY)};all_hotkeys[this.SEARCH_TM_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.SEARCH_TM_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.SEARCH_TM_KEY)};all_hotkeys[this.SEARCH_GLOSSARY_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.SEARCH_GLOSSARY_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.SEARCH_GLOSSARY_KEY)};all_hotkeys[this.ADD_TERM_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.ADD_TERM_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.ADD_TERM_KEY)};all_hotkeys[this.ADD_COMMENT_KEY]={isAllowed:true,label:this.hotkey_label[this.ADD_COMMENT_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.ADD_COMMENT_KEY)};all_hotkeys[this.SOURCE_FILE_PREVIEW_KEY]={isAllowed:!crowdin.editor.isAllFilesSelected()&&!modeAssets()&&crowdin.user.hasManagerAccessToProject(),label:this.hotkey_label[this.SOURCE_FILE_PREVIEW_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.SOURCE_FILE_PREVIEW_KEY)};all_hotkeys[this.TRANSLATED_FILE_PREVIEW_KEY]={isAllowed:!crowdin.editor.isAllFilesSelected()&&!modeAssets()&&!modeReview(),label:this.hotkey_label[this.TRANSLATED_FILE_PREVIEW_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.TRANSLATED_FILE_PREVIEW_KEY)};all_hotkeys[this.OPEN_FILE_KEY]={isAllowed:true,label:this.hotkey_label[this.OPEN_FILE_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.OPEN_FILE_KEY)};all_hotkeys[this.ALL_STRINGS_KEY]={isAllowed:!IS_STRINGS_BASED_PROJECT||IS_EXTERNAL_PROJECT,label:this.hotkey_label[this.ALL_STRINGS_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.ALL_STRINGS_KEY)};all_hotkeys[this.DOWNLOAD_KEY]={isAllowed:!modeAssets()&&crowdin.editor.file&&!crowdin.editor.task.id&&!IS_STRINGS_BASED_PROJECT,label:this.hotkey_label[this.DOWNLOAD_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.DOWNLOAD_KEY)};all_hotkeys[this.DOWNLOAD_XLIFF_KEY]={isAllowed:!modeReview()&&!modeAssets()&&crowdin.editor.file&&!crowdin.editor.task.id&&!IS_STRINGS_BASED_PROJECT,label:this.hotkey_label[this.DOWNLOAD_XLIFF_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.DOWNLOAD_XLIFF_KEY)};all_hotkeys[this.UPLOAD_KEY]={isAllowed:!modeReview()&&!modeAssets()&&crowdin.editor.file&&!crowdin.editor.task.id&&!IS_STRINGS_BASED_PROJECT,label:this.hotkey_label[this.UPLOAD_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.UPLOAD_KEY)};all_hotkeys[this.TOGGLE_RIGHT_PANEL_KEY]={isAllowed:true,label:this.hotkey_label[this.TOGGLE_RIGHT_PANEL_KEY],scope:this.scopes.DOCUMENT,icon:"pane-opened-right",category:this.categories.THIRD,isBlocked:this.isFixedKey(this.TOGGLE_RIGHT_PANEL_KEY)};all_hotkeys[this.TOGGLE_LEFT_PANEL_KEY]={isAllowed:!modeReviewProofread(),label:this.hotkey_label[this.TOGGLE_LEFT_PANEL_KEY],scope:this.scopes.DOCUMENT,icon:"pane-opened-left",category:this.categories.THIRD,isBlocked:this.isFixedKey(this.TOGGLE_LEFT_PANEL_KEY)};all_hotkeys[this.CONTEXT_KEY]={isAllowed:true,label:modeAssets()?this.assets_hotkey_label[this.CONTEXT_KEY]:this.hotkey_label[this.CONTEXT_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.CONTEXT_KEY)};all_hotkeys[this.EDIT_CONTEXT_KEY]={isAllowed:crowdin.user.can_edit_context,label:modeAssets()?this.assets_hotkey_label[this.EDIT_CONTEXT_KEY]:this.hotkey_label[this.EDIT_CONTEXT_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.EDIT_CONTEXT_KEY)};all_hotkeys[this.REQUEST_CONTEXT_KEY]={isAllowed:!crowdin.user.can_edit_context,label:this.hotkey_label[this.REQUEST_CONTEXT_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.REQUEST_CONTEXT_KEY)};all_hotkeys[this.OPEN_SCREENSHOT_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.OPEN_SCREENSHOT_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.OPEN_SCREENSHOT_KEY)};all_hotkeys[this.QUIT_EDITOR_KEY]={isAllowed:true,label:this.hotkey_label[this.QUIT_EDITOR_KEY],scope:this.scopes.DOCUMENT,category:this.categories.THIRD,isBlocked:this.isFixedKey(this.QUIT_EDITOR_KEY)};all_hotkeys[this.FOCUS_MENU_KEY]={isAllowed:true,label:this.hotkey_label[this.FOCUS_MENU_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FOURTH,isBlocked:this.isFixedKey(this.FOCUS_MENU_KEY)};all_hotkeys[this.KEYBOARD_SHORTCUTS_KEY]={isAllowed:true,label:this.hotkey_label[this.KEYBOARD_SHORTCUTS_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FOURTH,isBlocked:this.isFixedKey(this.KEYBOARD_SHORTCUTS_KEY)};all_hotkeys[this.STRING_KEY]={isAllowed:modeTranslateProofread()&&crowdin.user.hasManagerAccessToProject(),label:this.hotkey_label[this.STRING_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIFTH,isBlocked:this.isFixedKey(this.STRING_KEY)};all_hotkeys[this.TOGGLE_TAGS_HIGHLIGHT_KEY]={isAllowed:!modeAssets(),label:this.hotkey_label[this.TOGGLE_TAGS_HIGHLIGHT_KEY],scope:this.scopes.DOCUMENT,category:this.categories.FIFTH,isBlocked:this.isFixedKey(this.TOGGLE_TAGS_HIGHLIGHT_KEY)};all_hotkeys[this.COPY_NEXT_TAG]={isAllowed:modeTranslate(),label:this.hotkey_label[this.COPY_NEXT_TAG],scope:this.scopes.DOCUMENT,category:this.categories.FIFTH,isBlocked:this.isFixedKey(this.COPY_NEXT_TAG)};var filtered_keys=Object.keys(all_hotkeys).filter((function(hotKey){return all_hotkeys[hotKey].isAllowed}));var result=[];for(var i=0;i<filtered_keys.length;i++){if(crowdin.editor.jipt_mode&&this.disable_jipt_mode_hotkeys.indexOf(filtered_keys[i])!==-1){continue}if(IS_STRINGS_BASED_PROJECT&&this.disable_strings_based_project_hotkeys.indexOf(filtered_keys[i])!==-1){continue}result.push({key:filtered_keys[i],label:all_hotkeys[filtered_keys[i]].label,value:is_mac?this.hotkeys_mac[filtered_keys[i]]:this.hotkeys_other[filtered_keys[i]],icon:all_hotkeys[filtered_keys[i]].icon||null,category:all_hotkeys[filtered_keys[i]].category||null,isBlocked:all_hotkeys[filtered_keys[i]].isBlocked||null,withModifier:all_hotkeys[filtered_keys[i]].withModifier||null})}return result}},{key:"allowOnlyInputHotkey",value:function allowOnlyInputHotkey(allow){hotkeys.filter=function(_ref2){var target=_ref2.target;return allow?target.tagName=="INPUT"||target.tagName=="SELECT"||target.tagName=="TEXTAREA":true}}},{key:"hotkeyHasNumberModifier",value:function hotkeyHasNumberModifier(hotkeyString){var rangeRegexp=RegExp(/{(\d)-(\d)}$/);return rangeRegexp.test(hotkeyString)}},{key:"getModifiersPartFromHotkey",value:function getModifiersPartFromHotkey(hotkeysString){return hotkeysString.substring(0,hotkeysString.indexOf("{"))}},{key:"getFirstNumberFromHotkey",value:function getFirstNumberFromHotkey(hotkeysString){return hotkeysString.substring(hotkeysString.indexOf("{")+1,hotkeysString.indexOf("-"))}},{key:"getLastNumberFromHotkey",value:function getLastNumberFromHotkey(hotkeysString){return hotkeysString.substring(hotkeysString.indexOf("-")+1,hotkeysString.indexOf("}"))}},{key:"isHotkeyWithNumber",value:function isHotkeyWithNumber(hotkeyString){var endsWithNumber=/\d$/;return endsWithNumber.test(hotkeyString)}},{key:"generateArrayOfHotkeysFromHotkey",value:function generateArrayOfHotkeysFromHotkey(hotkeyWithNumberModifier){var hotkeysArrayWithNumberModifiers=[];var modifiersPart=this.getModifiersPartFromHotkey(hotkeyWithNumberModifier);var firstNumber=this.getFirstNumberFromHotkey(hotkeyWithNumberModifier);var lastNumber=this.getLastNumberFromHotkey(hotkeyWithNumberModifier);if(firstNumber<=lastNumber){for(var index=firstNumber;index<=lastNumber;index++){hotkeysArrayWithNumberModifiers.push("".concat(modifiersPart).concat(index))}}return hotkeysArrayWithNumberModifiers}},{key:"generateHotkeysString",value:function generateHotkeysString(hotKeysObject){var hotKeysArray=[];var hotkeysArrayWithNumberModifiers=[];var resultArray;for(var key in hotKeysObject){if(hotKeysObject.hasOwnProperty(key)&&hotKeysObject[key]){if(!this.isInputControlKeys(hotKeysObject[key])&&!(key===this.INPUT_REDO_KEY||key===this.INPUT_UNDO_KEY)){if(this.hotkeyHasNumberModifier(hotKeysObject[key])){hotkeysArrayWithNumberModifiers=hotkeysArrayWithNumberModifiers.concat(this.generateArrayOfHotkeysFromHotkey(hotKeysObject[key]))}else{hotKeysArray.push(hotKeysObject[key])}}}}if(hotkeysArrayWithNumberModifiers.length){resultArray=hotKeysArray.concat(hotkeysArrayWithNumberModifiers)}else{resultArray=hotKeysArray}return resultArray.join(", ")}},{key:"getPressedHotkey",value:function getPressedHotkey(hotkeyShortcut,hotKeysObject){var _this4=this;var hotkeysKeysWithNumberModifiers=Object.keys(hotKeysObject).filter((function(item){return _this4.hotkeyHasNumberModifier(hotKeysObject[item])}));if(this.isHotkeyWithNumber(hotkeyShortcut)&&hotkeysKeysWithNumberModifiers.length){var potentialHotkeyKeys=hotkeysKeysWithNumberModifiers.filter((function(key){var arrayOfHotkeys=_this4.generateArrayOfHotkeysFromHotkey(hotKeysObject[key]);return arrayOfHotkeys.indexOf(hotkeyShortcut)!==-1}));if(potentialHotkeyKeys.length){return potentialHotkeyKeys[0]}}return Object.keys(hotKeysObject).filter((function(item){return hotKeysObject[item]===hotkeyShortcut}))[0]}},{key:"runHotkeyAction",value:function runHotkeyAction(hotkey,hotkeyShortcut,event){if(crowdin.editor.layout.mainMenuOpened&&this.open_menu_hotkeys.indexOf(hotkey)===-1)return;var highlightTimeout=null;var clearHighlight=function clearHighlight(){clearTimeout(highlightTimeout);highlightTimeout=setTimeout((function(){$("#suggest_translation, "+"#prev_translation, "+"#next_translation, "+"#assets_prev_page, "+"#assets_next_page").removeClass("active")}),150)};var _crowdin$editor2=crowdin.editor,modeAssets=_crowdin$editor2.modeAssets,modeReview=_crowdin$editor2.modeReview,modeTranslate=_crowdin$editor2.modeTranslate,modeProofread=_crowdin$editor2.modeProofread,modeReviewProofread=_crowdin$editor2.modeReviewProofread;var dataSource=1;switch(hotkey){case this.FOCUS_MENU_KEY:$("#main-menu-toggler").focus();break;case this.KEYBOARD_SHORTCUTS_KEY:crowdin.plugins.crowdin_editor_hotkeys.run();break;case this.CHOOSE_SUGGESTION_KEY:var suggestionIndex=hotkeyShortcut&&hotkeyShortcut.match(/\d+/)[0];if(!modeAssets()&&+suggestionIndex!==-1){var sortedSuggestionText=crowdin.helpers.translation.sortSuggestionTexts();if(sortedSuggestionText.length>0&&sortedSuggestionText[+suggestionIndex-1]){crowdin.translation.setValue(sortedSuggestionText[+suggestionIndex-1])}}break;case this.SAVE_SUGGESTION_KEY:if(modeTranslate()){if(document.activeElement.id==="translation"&&crowdin.translation&&crowdin.translation.getValue().length){crowdin.translation.save_suggestion();$("#suggest_translation").addClass("active");$("#next_translation").addClass("active");clearHighlight()}}if(modeReviewProofread()){if(crowdin.phrases&&!$("body > .ui-widget-overlay").length){var isEqualSaveComment=false;if(is_mac&&this.hotkeys_mac[this.SAVE_SUGGESTION_KEY]===this.hotkeys_mac[this.SAVE_COMMENT_KEY]||!is_mac&&this.hotkeys_other[this.SAVE_SUGGESTION_KEY]===this.hotkeys_other[this.SAVE_COMMENT_KEY]){isEqualSaveComment=true}if(!isEqualSaveComment||isEqualSaveComment&&!$(document.activeElement).closest("#discussions_control")[0]){var selectedIds=crowdin.phrases.get_selected_translations_id();if(modeProofread()&&selectedIds.length){selectedIds.forEach((function(id){$(".proofread-string-wrapper[data-id=".concat(id,"] .suggest_translation_wrapper .suggest_translation")).trigger("click")}))}else if(modeReview()&&selectedIds.length===1){var suggestText=$(".proofread-string-wrapper[data-id=".concat(selectedIds[0],"] textarea")).val();crowdin.phrases.save_suggestion(suggestText)}}}}break;case this.NEXT_TRANSLATION_KEY:if(modeTranslate()){if(crowdin.translation&&!$("body > .ui-widget-overlay").length){crowdin.translation.next(true);$("#next_translation").addClass("active");clearHighlight()}}if(modeReviewProofread()){if(crowdin.phrases&&!$("body > .ui-widget-overlay").length){crowdin.phrases.select_next_phrase()}}if(modeAssets()){if(crowdin.translation&&!$("body > .ui-widget-overlay").length){crowdin.translation.change_page(crowdin.translation.current_page+1);$("#assets_next_page").addClass("active");clearHighlight()}}break;case this.PREVIOUS_TRANSLATION_KEY:if(modeTranslate()){if(crowdin.translation&&!$("body > .ui-widget-overlay").length){crowdin.translation.prev();$("#prev_translation").addClass("active");clearHighlight()}}if(modeReviewProofread()){if(crowdin.phrases&&!$("body > .ui-widget-overlay").length){crowdin.phrases.select_prev_phrase()}}if(modeAssets()){if(crowdin.translation&&!$("body > .ui-widget-overlay").length){crowdin.translation.change_page(crowdin.translation.current_page-1);$("#assets_prev_page").addClass("active");clearHighlight()}}break;case this.TOGGLE_RIGHT_PANEL_KEY:crowdin.panel.toggle_panel();break;case this.COPY_SOURCE_KEY:if(!modeAssets()){crowdin.plugins.copy_source.run_with_highlight(event)}break;case this.COPY_SOURCE_SKELETON_KEY:if(!modeAssets()){crowdin.plugins.copy_source_skeleton.run_with_highlight(event)}break;case this.APPROVE_KEY:crowdin.plugins.approve_phrase.run_with_highlight(event);break;case this.DISAPPROVE_KEY:crowdin.plugins.disapprove_phrase.run_with_highlight(event);break;case this.VOTE_PLUS_KEY:crowdin.plugins.vote_plus_phrase.run_with_highlight(event);break;case this.VOTE_MINUS_KEY:crowdin.plugins.vote_minus_phrase.run_with_highlight(event);break;case this.STRING_KEY:if(modeTranslate()){crowdin.plugins.crowdins_string.run()}else if(modeProofread()&&crowdin.phrases_list.get_selected_items().length===1){crowdin.translation.toggle_visibility(!crowdin.models.phrases.get_translation(crowdin.translation.translation_id)["hidden"])}break;case this.CONTEXT_KEY:if(modeAssets()||modeTranslate()){$(crowdin.plugins.crowdins_context.button_id).trigger("click")}else if(modeProofread()){$(crowdin.plugins.proofread_extended_info.button_id).trigger("click")}else if(modeReview()){var _selectedIds=crowdin.phrases.get_selected_translations_id();if(_selectedIds.length>0){for(var i=0;i<_selectedIds.length;i++){$("#phrase_"+_selectedIds[i]).find(".proofread-string-source .context_separator .toggle").toggleClass("active").next("a").toggleClass("hidden").parent().next("div").toggleClass("hidden")}}}break;case this.EDIT_CONTEXT_KEY:crowdin.plugins.crowdins_context_editor.run_with_highlight(event);break;case this.REQUEST_CONTEXT_KEY:crowdin.plugins.crowdins_context_request.run_with_highlight(event);break;case this.OPEN_SCREENSHOT_KEY:if(modeReviewProofread()){if(crowdin.translation&&crowdin.translation.data.screenshots.length){var id="string-screenshot-"+crowdin.translation.data.screenshots[0].id;$("#"+id).click()}}if(modeTranslate()){var translation=crowdin.translation.get_translation();if(translation.screenshots.length){var _id="string-screenshot-"+translation.screenshots[0].id;$("#"+_id).click()}}break;case this.SEARCH_KEY:if(modeTranslate()&&!crowdin.editor.layout.isOpened("left")){crowdin.editor.layout.toggle("left")}crowdin.plugins.crowdins_search.run();break;case this.REPLACE_KEY:if(!modeAssets()){crowdin.plugins.crowdin_replace_in_translations.run()}break;case this.OPEN_FILE_KEY:crowdin.plugins.open_file.run();break;case this.AUTOCOMPLETE_KEY:if(crowdin.user.settings.enable_autocomplete&&document.activeElement.id==="translation"){crowdin.translation.openAutocomplete()}break;case this.TOGGLE_LEFT_PANEL_KEY:if(!modeReviewProofread()){crowdin.editor.layout.toggle("left")}break;case this.SEARCH_TM_KEY:if(!modeAssets()){if(modeReviewProofread()){var ids=crowdin.phrases.get_selected_translations_id();if(ids.length===1){crowdin.plugins.concordance.toggle_search_concordance()}}else{crowdin.plugins.concordance.toggle_search_concordance()}}break;case this.SEARCH_GLOSSARY_KEY:if(!modeAssets()){if(modeReviewProofread()){var _ids=crowdin.phrases.get_selected_translations_id();if(_ids.length===1){crowdin.glossary.toggle_glossary_tab()}}else{crowdin.glossary.toggle_glossary_tab()}}break;case this.ADD_TERM_KEY:if(!modeAssets()){crowdin.glossary.show_new_term_dialog();$("#editor-source-term-text").focus()}break;case this.SOURCE_FILE_PREVIEW_KEY:crowdin.helpers.file_preview.openFilePreview(dataSource);break;case this.TRANSLATED_FILE_PREVIEW_KEY:dataSource=0;crowdin.helpers.file_preview.openFilePreview(dataSource);break;case this.CLEAR_TRANSLATION_KEY:if(modeTranslate()){crowdin.plugins.clear_text.run()}if(modeProofread()){var identifier=crowdin.translation.getTextareaSelector();if($(identifier)[0]===document.activeElement){crowdin.translation.setValue("")}}if(modeReview()){var _ids2=crowdin.phrases.get_selected_translations_id();_ids2.length&&_ids2.forEach((function(id){if($("#phrase_".concat(id," textarea"))[0]===document.activeElement){$("#phrase_".concat(id," textarea")).val("")}}))}break;case this.DOWNLOAD_KEY:if(crowdin.user.may_download&&crowdin.editor.file.export_ready){var titlePlaceholders={language:crowdin.editor.target_language.name,file:crowdin.editor.file.name};var title=crowdin.editor.file.upload_ready?_l("editorMenu.getLanguageVersionOfFileOffline",titlePlaceholders):_l("editorMenu.getLanguageVersionOfFile",titlePlaceholders);prepare_download_file_dialog(title)}break;case this.DOWNLOAD_XLIFF_KEY:if(crowdin.user.may_download&&crowdin.editor.file.export_xliff_ready){var _titlePlaceholders={language:crowdin.editor.target_language.name,file:crowdin.editor.file.name?crowdin.editor.file.name:_l("editorMenu.allFilesL")};var _title=crowdin.editor.file.upload_ready?_l("editorMenu.getLanguageXliffVersionOfFileOffline",_titlePlaceholders):_l("editorMenu.getLanguageXliffVersionOfFile",_titlePlaceholders);prepare_download_file_dialog(_title,true)}break;case this.UPLOAD_KEY:if(crowdin.editor.isUploadTranslationsAvailable()){var _action_url=sprintf("/project/%s/%s/%s/upload",crowdin.editor.project.identifier,crowdin.editor.target_language.internal_code,crowdin.editor.file.id);var _type=crowdin.editor.file.type;var _upload_all=crowdin.editor.file.id=="all";var _file_title=crowdin.editor.file.name?crowdin.editor.file.name:null;if(_upload_all||[crowdin.editor.file_nodes.directory,crowdin.editor.file_nodes.branch].indexOf(+crowdin.editor.file.node_type)!=-1||!crowdin.editor.file.upload_ready){_action_url+="?as_xliff=1";_type="xliff"}show_upload_translations_dialog(_type,_file_title,_action_url,crowdin.editor.file.note)}break;case this.ALL_STRINGS_KEY:crowdin.plugins.open_file&&crowdin.plugins.open_file.changeFile("all");break;case this.QUIT_EDITOR_KEY:var url=crowdin.editor.task.id?crowdin.editor.project.url+"/tasks":crowdin.helpers.url.getProjectLanguageUrl();crowdin.helpers.url.redirect(url);break;case this.SELECTION_TO_UPPERCASE_KEY:if(modeTranslate()){crowdin.translation.area.transformSelection("uppercase")}if(modeProofread()){crowdin.translation.transformSelection("uppercase")}break;case this.SELECTION_TO_LOWERCASE_KEY:if(modeTranslate()){crowdin.translation.area.transformSelection("lowercase")}if(modeProofread()){crowdin.translation.transformSelection("lowercase")}break;case this.ADD_COMMENT_KEY:var addComment=function addComment(){if(!crowdin.editor.layout.isOpened("right")){crowdin.panel.toggle_panel()}$("#comments_section").tab("show");$("#discussions_control textarea").focus()};if(modeReviewProofread()){var _ids3=crowdin.phrases.get_selected_translations_id();if(_ids3.length===1){addComment()}}else{addComment()}break;case this.TOGGLE_TAGS_HIGHLIGHT_KEY:var editorShowPlaceholders=String($("#editor_show_placeholders").find(".btn.active").data("value"));$("#editor_show_placeholders").find(".btn").removeClass("active");if(editorShowPlaceholders==="default"){editorShowPlaceholders="false";$("#editor_show_placeholders").find(".btn[data-value='"+"false"+"']").addClass("active");$.jGrowl(_l("editor.tags.show"),{theme:"jGrowl-success"})}else if(editorShowPlaceholders==="false"){editorShowPlaceholders="true";$("#editor_show_placeholders").find(".btn[data-value='"+"true"+"']").addClass("active");$.jGrowl(_l("editor.tags.hide"),{theme:"jGrowl-success"})}else{editorShowPlaceholders="default";$("#editor_show_placeholders").find(".btn[data-value='"+"default"+"']").addClass("active");$.jGrowl(_l("editor.tags.auto"),{theme:"jGrowl-success"})}crowdin.user.settings.editor_show_placeholders=editorShowPlaceholders;crowdin.highlight.init_regexps();if(crowdin.translation){crowdin.phrases.markup_replacers.clear();crowdin.models.mt.storage.clear();crowdin.models.external_suggestions.storage.clear()}if(crowdin.phrases.version==="html"){crowdin.translation.refresh()}else{!crowdin.editor.jipt_mode&&crowdin.phrases.refresh();crowdin.editor.jipt_mode&&crowdin.translation.translation_id&&crowdin.translation.refresh()}break;case this.COPY_NEXT_TAG:if(modeTranslate()){var nextTag=crowdin.translation.getNextTag();nextTag?crowdin.translation.insertValue(nextTag):false}break}if(crowdin.editor.layout.mainMenuOpened){crowdin.editor.layout.hideMenu()}}},{key:"convertToMacView",value:function convertToMacView(hotkey){var resultArray=[];var addToEnd=[];var resultArrayWithAddedKeys=[];var strArray=hotkey.split("+");var compare=function compare(a,b){if(a.priority<b.priority){return-1}if(a.priority>b.priority){return 1}return 0};var sortedByPriorityHotkeyArray=this.macos_keys_icons.sort(compare);strArray.forEach((function(key){var indexOfIcon=sortedByPriorityHotkeyArray.map((function(item){return item.title})).indexOf(key);if(indexOfIcon!==-1){resultArray[indexOfIcon]=sortedByPriorityHotkeyArray[indexOfIcon].icon}else{addToEnd.push(key)}}));addToEnd.length?resultArrayWithAddedKeys=resultArray.concat(addToEnd):resultArrayWithAddedKeys=resultArray;var cleanResultArray=resultArrayWithAddedKeys.filter((function(){return true}));return cleanResultArray.join("")}},{key:"convertMacIconToTitle",value:function convertMacIconToTitle(stringWithIcon){var _this5=this;var arrayWithIcon=stringWithIcon.split("");var resultString="";var _loop=function _loop(i){var macosKeysIconsIndex=_this5.macos_keys_icons.findIndex((function(item){return item.icon===arrayWithIcon[i]}));if(macosKeysIconsIndex!==-1){resultString+=_this5.macos_keys_icons[macosKeysIconsIndex].title+"+"}else{resultString+=arrayWithIcon[i]}};for(var i=0;i<arrayWithIcon.length;i++){_loop(i)}if(resultString.charAt(resultString.length-1)==="+"){resultString=resultString.substring(0,resultString.length-1)}return resultString}},{key:"bindHotkeys",value:function bindHotkeys(){var self=this;var availableHotKeys=this.getAvailableHotkeys();var savedHotKeys={};for(var i=0;i<availableHotKeys.length;i++){savedHotKeys[availableHotKeys[i].key]=availableHotKeys[i].value}var hotKeysString=this.generateHotkeysString(savedHotKeys);if(this.initial_hotkeys===""){this.initial_hotkeys=hotKeysString.slice()}else{hotkeys.unbind(this.initial_hotkeys);this.initial_hotkeys=hotKeysString.slice()}if(!is_mac){hotKeysString=this.replaceCommandMeta(hotKeysString)}hotkeys.setScope(this.scopes.DOCUMENT);hotkeys(hotKeysString,{scope:this.scopes.DOCUMENT},(function(event,handler){event.preventDefault();event.stopPropagation();var handlerShortCut=is_mac?handler.shortcut:self.replaceCommandMeta(handler.shortcut);var pressedHotkey=self.getPressedHotkey(handlerShortCut,savedHotKeys);pressedHotkey&&self.runHotkeyAction(pressedHotkey,handlerShortCut,event);return false}));initHotkeyTitles()}}]);return crowdin_hotkeys}(CrowdinComponent);
