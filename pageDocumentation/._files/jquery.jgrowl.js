"use strict";(function($){$.jGrowl=function(m,o){if($("#jGrowl").size()===0)$('<div id="jGrowl"></div>').addClass(o&&o.position?o.position:$.jGrowl.defaults.position).appendTo("body");$("#jGrowl").jGrowl(m,o)};$.fn.jGrowl=function(m,o){if($.isFunction(this.each)){var args=arguments;return this.each((function(){if($(this).data("jGrowl.instance")===undefined){$(this).data("jGrowl.instance",$.extend(new $.fn.jGrowl,{notifications:[],element:null,interval:null}));$(this).data("jGrowl.instance").startup(this)}if($.isFunction($(this).data("jGrowl.instance")[m])){$(this).data("jGrowl.instance")[m].apply($(this).data("jGrowl.instance"),$.makeArray(args).slice(1))}else{$(this).data("jGrowl.instance").create(m,o)}}))}};$.extend($.fn.jGrowl.prototype,{defaults:{pool:5,header:"",group:"",sticky:false,position:"center",glue:"after",theme:"jGrowl-notice",themeState:"",corners:"10px",check:250,life:3e3,closeDuration:0,openDuration:0,easing:"swing",closer:true,closeTemplate:"&times;",closerTemplate:"<div><span>Close All</span></div>",log:function log(){},beforeOpen:function beforeOpen(){},afterOpen:function afterOpen(){},open:function open(){},beforeClose:function beforeClose(){},close:function close(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function create(message,options){var o=$.extend({},this.defaults,options);if(typeof o.speed!=="undefined"){o.openDuration=o.speed;o.closeDuration=o.speed}this.notifications.push({message:message,options:o});o.log.apply(this.element,[this.element,message,o])},render:function render(n){var self=this;var message=n.message;var o=n.options;o.themeState=o.themeState===""?"":"ui-state-"+o.themeState;var notification=$("<div/>").addClass("jGrowl-notification "+o.themeState+(o.group!==undefined&&o.group!==""?" "+o.group:"")).append($("<div/>").addClass("jGrowl-close unselectable").html(o.closeTemplate)).append($("<div/>").addClass("jGrowl-header").html(o.header)).append($("<div/>").addClass("jGrowl-message").html(message)).data("jGrowl",o).addClass(o.theme).children("div.jGrowl-close").bind("click.jGrowl",(function(){$(this).parent().trigger("jGrowl.beforeClose")})).parent();$(notification).bind("mouseover.jGrowl",(function(){$("div.jGrowl-notification",self.element).data("jGrowl.pause",true)})).bind("mouseout.jGrowl",(function(){$("div.jGrowl-notification",self.element).data("jGrowl.pause",false)})).bind("jGrowl.beforeOpen",(function(){if(o.beforeOpen.apply(notification,[notification,message,o,self.element])!==false){$(this).trigger("jGrowl.open")}})).bind("jGrowl.open",(function(){if(o.open.apply(notification,[notification,message,o,self.element])!==false){if(o.glue=="after"){$("div.jGrowl-notification:last",self.element).after(notification)}else{$("div.jGrowl-notification:first",self.element).before(notification)}$(this).animate(o.animateOpen,o.openDuration,o.easing,(function(){if($.support.opacity===false)this.style.removeAttribute("filter");if($(this).data("jGrowl")!==null)$(this).data("jGrowl").created=new Date;$(this).trigger("jGrowl.afterOpen")}))}})).bind("jGrowl.afterOpen",(function(){o.afterOpen.apply(notification,[notification,message,o,self.element])})).bind("jGrowl.beforeClose",(function(){if(o.beforeClose.apply(notification,[notification,message,o,self.element])!==false)$(this).trigger("jGrowl.close")})).bind("jGrowl.close",(function(){$(this).data("jGrowl.pause",true);$(this).animate(o.animateClose,o.closeDuration,o.easing,(function(){if($.isFunction(o.close)){if(o.close.apply(notification,[notification,message,o,self.element])!==false)$(this).remove()}else{$(this).remove()}}))})).trigger("jGrowl.beforeOpen");if(o.corners!==""&&$.fn.corner!==undefined)$(notification).corner(o.corners);if($("div.jGrowl-notification:parent",self.element).size()>1&&$("div.jGrowl-closer",self.element).size()===0&&this.defaults.closer!==false){$(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState).addClass(this.defaults.theme).appendTo(self.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",(function(){$(this).siblings().trigger("jGrowl.beforeClose");$(this).remove();if($.isFunction(self.defaults.closer)){self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]])}}))}},update:function update(){$(this.element).find("div.jGrowl-notification:parent").each((function(){if($(this).data("jGrowl")!==undefined&&$(this).data("jGrowl").created!==undefined&&$(this).data("jGrowl").created.getTime()+parseInt($(this).data("jGrowl").life,10)<(new Date).getTime()&&$(this).data("jGrowl").sticky!==true&&($(this).data("jGrowl.pause")===undefined||$(this).data("jGrowl.pause")!==true)){$(this).trigger("jGrowl.beforeClose")}}));if(this.notifications.length>0&&(this.defaults.pool===0||$(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool))this.render(this.notifications.shift());if($(this.element).find("div.jGrowl-notification:parent").size()<2){$(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,(function(){$(this).remove()}))}},startup:function startup(e){this.element=$(e).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval((function(){$(e).data("jGrowl.instance").update()}),parseInt(this.defaults.check,10))},shutdown:function shutdown(){$(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty();clearInterval(this.interval)},close:function close(){$(this.element).find("div.jGrowl-notification").each((function(){$(this).trigger("jGrowl.beforeClose")}))}});$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults})(jQuery);
