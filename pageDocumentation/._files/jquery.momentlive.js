"use strict";(function($,undefined){var pluginName="momentlive";$[pluginName]={defaults:{timezone:null,locale:null}};function MomentLive(element,options){this.element=element;this.options=$.extend({},$[pluginName]["defaults"],options);this._defaults=$[pluginName]["defaults"];this._name=pluginName;this.init()}MomentLive.prototype={init:function init(){var self=this;self.moment=moment($(self.element).data("datetime"));self.timeFormat=$(self.element).data("timeformat");if(self.options.timezone!==null){self.moment.utcOffset(self.options.timezone)}if(self.options.locale!==null&&self.options.locale!==undefined){self.moment.locale(self.options.locale)}self.element.title=self.moment.format("MMM DD, "+(self.timeFormat?self.timeFormat:"H:mm"));self.refresh();self.interval=setInterval((function(){self.refresh.call(self)}),2e4)},refresh:function refresh(){if(!$.contains(document,this.element)){clearInterval(this.interval);$.removeData(this,"plugin_"+pluginName);return}if(this.moment.isAfter(new Date)){var text=this.moment.from(this.moment)}else{var text=this.moment.fromNow()}if($(this.element).text()!==text){$(this.element).text(text)}}};$.fn[pluginName]=function(options){return this.each((function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new MomentLive(this,options))}}))}})(jQuery);
