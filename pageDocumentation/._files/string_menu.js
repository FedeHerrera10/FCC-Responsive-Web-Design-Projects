"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var StringMenuView=function(_React$Component){_inherits(StringMenuView,_React$Component);var _super=_createSuper(StringMenuView);function StringMenuView(){_classCallCheck(this,StringMenuView);return _super.apply(this,arguments)}_createClass(StringMenuView,[{key:"render",value:function render(){var resultTemplate=["ul.dropdown-menu"+(IS_MOBILE?" modal-menu":""),{id:"file_options"},this.toggleStatusBtn(),this.toggleVisibilityBtn(),this.copyUrlBtn(),this.copySkeletonBtn(),this.translationHistoryBtn(),this.viewMasterStringBtn()];return ReactCompile(resultTemplate)}},{key:"toggleStatusBtn",value:function toggleStatusBtn(){var _this=this;var stepStatus=this.props.translation.step_status;if(!stepStatus){return null}var text=_l("editor.markDone");if(stepStatus===STEP_DONE){text=_l("editor.markTodo")}return["li",["a",{href:"#",onClick:function onClick(evt){_this.toggleStatus(evt)},tabIndex:"-1"},text]]}},{key:"toggleVisibilityBtn",value:function toggleVisibilityBtn(){if(!crowdin.user.hasManagerAccessToProject()||!crowdin.editor.modeTranslate()){return null}var title=_l("editor.hideStringFromTranslators");var text=_l("editor.hideString");if(this.props.translation.hidden===true){title=_l("editor.makeStringVisibleForTranslators");text=_l("editor.makeStringVisible")}title=sprintf("%s (%s)",title,crowdin.hotkeys.get("string_key"));return["li",["a",{href:"#",title:title,onClick:this.toggleVisibility.bind(this),tabIndex:"-1"},text]]}},{key:"copyUrlBtn",value:function copyUrlBtn(){if(!crowdin.editor.modeTranslate()||!crowdin.editor.target_language){return null}return["li",["a",{href:"#",onClick:this.copyToClipboard,tabIndex:"-1"},_l("editor.copyStringURL")]]}},{key:"copySkeletonBtn",value:function copySkeletonBtn(){if(!crowdin.editor.modeTranslate()){return null}return["li",["a",{href:"#",id:"copy-source-skeleton",tabIndex:"-1"},_l("editor.copySourceSkeleton")]]}},{key:"translationHistoryBtn",value:function translationHistoryBtn(){if(!crowdin.editor.modeTranslate()||!crowdin.editor.target_language){return null}return["li",["a",{href:crowdin.helpers.translation.getHistoryUrl(),target:"_blank",tabIndex:"-1"},_l("editor.translationHistory")]]}},{key:"viewMasterStringBtn",value:function viewMasterStringBtn(){if(!+this.props.translation.duplicate_of){return null}return["li",["a",{href:crowdin.helpers.translation.getStringUrlById(this.props.translation.duplicate_of),target:"_blank",tabIndex:"-1"},_l("editor.viewMasterString")]]}},{key:"copyToClipboard",value:function copyToClipboard(event){crowdin.clipboard.successMessage=_l("editorInit.urlCopiedToClipboard");crowdin.clipboard.copy(crowdin.helpers.translation.getStringUrl());event.preventDefault()}},{key:"toggleVisibility",value:function toggleVisibility(event){crowdin.translation.toggle_visibility(!this.props.translation.hidden);event.preventDefault()}},{key:"toggleStatus",value:function toggleStatus(event){var stepStatus=this.props.translation.step_status;var markDone=stepStatus===STEP_DONE?0:1;crowdin.helpers.translation.toggle_status(markDone);event.preventDefault()}}]);return StringMenuView}(React.Component);
